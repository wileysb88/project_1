//-------------CLIENTS ARRAY---------------------

var clients = [
	{
    client: 'Music Festival',
    story: "Im 21 and headed to a music festival in California. I am going with 15 of my BFFs so I HAVE to look insta-ready. It will be warm out and Im super hot so I definitely want to show off some skin. Music festivals are all about a boho, free-spirited lifestyle and I have to stand out for all the right reasons. Show me what you got!",
    tops: [
      {rank: 15, img: 'http://static.zara.net/photos//2016/V/0/1/p/4876/045/251/2/w/400/4876045251_6_1_1.jpg?timestamp=1454091182782'},
      {rank: 0, img: 'http://static.zara.net/photos//2016/V/0/1/p/4043/055/800/2/w/400/4043055800_6_1_1.jpg?timestamp=1454685238743'},
			{rank: 5, img: 'http://static.zara.net/photos//2016/V/0/1/p/6819/045/251/2/w/400/6819045251_6_1_1.jpg?timestamp=1456518992909'}
    ],
    bottoms: [
      {rank: 5, img: 'http://media.topshop.com/wcsstore/TopShopUS/images/catalog/14E01HCRM_large.jpg '},
      {rank: 0, img: 'http://static.zara.net/photos//2016/V/0/1/p/0387/024/802/2/w/400/0387024802_6_1_1.jpg?timestamp=1454692390455'},
			{rank: 15, img: 'http://mediaus.topshop.com/wcsstore/TopShopUS/images/catalog/TS14E01IBLK_Zoom_F_1.jpg'}
    ],
    accessories: [
      {rank: 15, img: 'http://media.topshop.com/wcsstore/TopShopUS/images/catalog/19K35JNAV_large.jpg'},
      {rank: 5, img: 'http://media.topshop.com/wcsstore/TopShopUS/images/catalog/61H24IBLK_large.jpg'},
      {rank: 0, img: 'http://media.topshop.com/wcsstore/TopShopUS/images/catalog/24R09JBLK_large.jpg'}
    ]
  },
  {
    client: 'Rock Concert',
    story: "I’m a rocker chick and i’m going to see my favorite band at the Rivinia. It is a “sling back some beers and mosh around” kind of time but I can’t look like just another band groupie. I don’t want to look over the top either! Not to sound like a stereotype but I like leather, zippers and all things black and grey. Help me look good while rocking out!",
    tops: [
			{rank: 0, img: 'http://static.zara.net/photos//2016/V/0/1/p/1889/041/505/2/w/400/1889041505_6_1_1.jpg?timestamp=1457107298975'},
			{rank: 15, img: 'http://static.zara.net/photos//2016/V/0/1/p/3427/008/800/2/w/400/3427008800_6_1_1.jpg?timestamp=1453743085878'},
			{rank: 5, img: 'http://mediaus.topshop.com/wcsstore/TopShopUS/images/catalog/TS26X27IBLK_Zoom_F_1.jpg'}

    ],
    bottoms: [
      {rank: 5, img: 'http://static.zara.net/photos//2016/V/0/1/p/6840/049/400/2/w/400/6840049400_6_1_1.jpg?timestamp=1454685684230'},
      {rank: 0, img: 'http://static.zara.net/photos//2016/V/0/1/p/3057/260/800/2/w/400/3057260800_6_1_1.jpg?timestamp=1454521193694'},
			{rank: 15, img: 'http://static.zara.net/photos//2016/V/0/1/p/7223/042/802/2/w/400/7223042802_6_1_1.jpg?timestamp=1452877644540'}
    ],
    accessories: [
			{rank: 0, img: 'http://static.zara.net/photos//2016/V/1/1/p/1661/101/040/2/w/400/1661101040_1_1_1.jpg?timestamp=1455014086474'},
			{rank: 5, img: 'http://static.zara.net/photos//2016/V/1/1/p/1746/101/040/2/w/560/1746101040_1_1_1.jpg?ts=1452795758371'},
      {rank: 15, img: 'http://static.zara.net/photos//2016/V/1/1/p/1100/101/040/2/w/560/1100101040_1_1_1.jpg?ts=1457003360366'}
    ]
  },
  {
    client: 'Business Meeting',
    story: "I just got my first job out of college and my first day is next week! They said it’s business casual….but what does that even mean??? I want to be able to appear professional but not dress like my grandma. I need to demand respect and look damn good doing it. My new boss said “just a nice top and bottom”…hope she gives better direction on the job! Can you steer me in the right direction???",
    tops: [
      {rank: 5, img: 'http://static.zara.net/photos//2016/V/0/1/p/1313/020/044/2/w/400/1313020044_6_1_1.jpg?timestamp=1454092200151'},
      {rank: 0, img: 'http://static.zara.net/photos//2016/V/0/1/p/4786/064/660/2/w/400/4786064660_6_1_1.jpg?timestamp=1455128082962'},
			{rank: 15, img: 'http://static.zara.net/photos//2016/V/0/1/p/2335/683/250/2/w/400/2335683250_6_1_1.jpg?timestamp=1454692518301'}
    ],
    bottoms: [
      {rank: 5, img: 'http://static.zara.net/photos//2016/V/0/1/p/2052/679/401/2/w/560/2052679401_6_1_1.jpg?ts=1453922234400'},
      {rank: 0, img: 'http://static.zara.net/photos//2016/V/0/1/p/1628/035/067/2/w/400/1628035067_6_1_1.jpg?timestamp=1457107095398'},
			{rank: 15, img: 'http://static.zara.net/photos//2016/V/0/1/p/2234/666/679/2/w/1920/2234666679_6_1_1.jpg?timestamp=1457113615429'}
    ],
    accessories: [
      {rank: 15, img: 'http://static.zara.net/photos//2016/V/1/1/p/2434/101/040/2/w/400/2434101040_2_1_1.jpg?timestamp=1453290704726'},
      {rank: 5, img: 'http://static.zara.net/photos//2016/V/1/1/p/2202/101/040/2/w/400/2202101040_1_1_1.jpg?timestamp=1454345358076'},
      {rank: 0, img: 'http://static.zara.net/photos//2016/V/1/1/p/1746/101/040/2/w/560/1746101040_1_1_1.jpg?ts=1452795758371'}
    ]
  },
  {
    client: 'Pool Party',
    story: "My frenemy is having a pool party to celebrate the start of summer and I want to steal the spotlight. I want to look hot both in the pool and out. Something to throw on over an adorable bathing suit is a must. Plus you can’t forget the accessories….What can I wear to make sure all the guys are looking at me, just enough to piss off the host?",
    tops: [
			{rank: 0, img: 'http://media.topshop.com/wcsstore/TopShopUS/images/catalog/04W10HWHT_large.jpg'},
			{rank: 15, img: 'http://media.topshop.com/wcsstore/TopShopUS/images/catalog/03Y01JWHT_large.jpg'},
      {rank: 5, img: 'http://mediaus.topshop.com/wcsstore/TopShopUS/images/catalog/TS03Y03JBLK_Zoom_F_1.jpg'}
    ],
    bottoms: [
      {rank: 15, img: 'http://mediaus.topshop.com/wcsstore/TopShopUS/images/catalog/BUNDLE_03T05JRED03B03JRED_thumb.jpg'},
      {rank: 5, img: 'http://media.topshop.com/wcsstore/TopShopUS/images/catalog/BUNDLE_03L02JBLK03L03JBLK_large.jpg'},
      {rank: 0, img: 'http://media.topshop.com/wcsstore/TopShopUS/images/catalog/03N13JNAV_large.jpg'}
    ],
    accessories: [
      {rank: 15, img: 'http://media.topshop.com/wcsstore/TopShopUS/images/catalog/22S14JBLK_large.jpg'},
      {rank: 0, img: 'http://media.topshop.com/wcsstore/TopShopUS/images/catalog/24C13JBLK_large.jpg'},
			{rank: 5, img: 'http://mediaus.topshop.com/wcsstore/TopShopUS/images/catalog/61E18JGLD_thumb.jpg'}
    ]
  },
  {
    client: 'Hiking',
    story: "I’m going hiking with my college friends and want to make sure I’m not wearing another sweaty sorority t-shirt and gym shorts. I want to be able to look cute but also be able to scale any path I want to take! It’s supposed to be cool so I want to make sure I am warm but don’t make me look dumpy!!! Any ideas?",
    tops:[
      {rank: 5, img: 'https://underarmour.scene7.com/is/image/Underarmour/V5-1271521-904_LDF?scl=1&fmt=jpg&qlt=80&wid=612&hei=650&size=551,585&cache=on,off&bgc=f0f0f0&resMode=sharp2'},
      {rank: 0, img: 'https://underarmour.scene7.com/is/image/Underarmour/V5-1284980-750_LDF?scl=1&fmt=jpg&qlt=80&wid=612&hei=650&size=551,585&cache=on,off&bgc=f0f0f0&resMode=sharp2'},
			{rank: 15, img: 'https://underarmour.scene7.com/is/image/Underarmour/V5-1265926-001_LDF?scl=1&fmt=jpg&qlt=80&wid=612&hei=650&size=612,650&cache=on,off&bgc=f0f0f0&resMode=sharp2'}
    ],
    bottoms: [
      {rank: 15, img: 'https://underarmour.scene7.com/is/image/Underarmour/V5-1271786-002_LDF?scl=1&fmt=jpg&qlt=80&wid=612&hei=650&size=551,585&cache=on,off&bgc=f0f0f0&resMode=sharp2'},
      {rank: 5, img: 'https://underarmour.scene7.com/is/image/Underarmour/V5-1271544-002_LDF?scl=1&fmt=jpg&qlt=80&wid=612&hei=650&size=551,585&cache=on,off&bgc=f0f0f0&resMode=sharp2'},
      {rank: 0, img: 'https://underarmour.scene7.com/is/image/Underarmour/V5-1239244-035_LDF?scl=1&fmt=jpg&qlt=80&wid=612&hei=650&size=551,585&cache=on,off&bgc=f0f0f0&resMode=sharp2'}
    ],
    accessories: [
      {rank: 0, img: 'https://underarmour.scene7.com/is/image/Underarmour/1266422-001_DEFAULT?scl=1&fmt=jpg&qlt=80&wid=612&hei=650&size=551,585&cache=on,off&bgc=f0f0f0&resMode=sharp2'},
      {rank: 5, img: 'https://underarmour.scene7.com/is/image/Underarmour/1257745-407_DEFAULT?scl=1&fmt=jpg&qlt=80&wid=612&hei=650&size=551,585&cache=on,off&bgc=f0f0f0&resMode=sharp2'},
      {rank: 15, img: 'https://underarmour.scene7.com/is/image/Underarmour/1246734-467_DEFAULT?scl=1&fmt=jpg&qlt=80&wid=612&hei=650&size=551,585&cache=on,off&bgc=f0f0f0&resMode=sharp2'}
    ]
  }
]

// ---------------------------START THE CODE----------------------------


//------GLOBAL VARIABLES--------
var currentScore = 0;
var clickCount = 0;
var round = 0;
var dropCount = 0;





// --------------CLEARS BOARD--------------------------
var emptyBoard = function(){
		$('.story').empty();
		$('.tops').empty();
		$('.bottoms').empty();
		$('.accessories').empty();
		$('header').empty();
		$('.clientTitle').empty();
		//----.empty() won't remove a button so use .remove()
		$('.submit').remove();
}

//--------------SET NEW ROUND FOR DRAG AND DROP -------------------------------

var setNewRound = function(){
		$('.clientTitle').append(clients[round].client);
    $('.story').append('"'+ clients[round].story + '"');

		// loops through top images and adds top drop box
    for (var x = 0; x<clients[round].tops.length; x++){
        $('.tops').append("<img src='" + clients[round].tops[x].img + "'class='" + clients[round].tops[x].rank + "' draggable='true' ondragover='event.preventDefault()'/>")
      };
		$('.tops').append("<div class='dropzoneTop'><div class='wordsTop'>Place Top Here</div></div>");

		// loops through bottom images and adds bottom drop box
		for (var y = 0; y<clients[round].bottoms.length; y++){
        $('.bottoms').append("<img src='" + clients[round].bottoms[y].img + "'class='" + clients[round].bottoms[y].rank + "' draggable='true' ondragover='event.preventDefault()'/>")
      };
		$('.bottoms').append("<div class='dropzoneBottom'><div class='wordsBottom'>Place Bottom Here</div></div>");

		// loops through accessory images and adds accessory drop box
		for (var z = 0; z<clients[round].accessories.length; z++){
        $('.accessories').append("<img src='" + clients[round].accessories[z].img + "'class='" + clients[round].accessories[z].rank + "' draggable='true' ondragover='event.preventDefault()'/>")
    	};
		$('.accessories').append("<div class='dropzoneAccessory'><div class='wordsAccessory'>Place Accessory Here</div></div>");
	};


//--------------END FUNCTION----------------------------------
var endFunction = function(){
		emptyBoard();
		$('.endingInfo').toggle();
		$('.endingInfo .score').append('<div>Your score is ' + currentScore + '!')
		// --- gives rank for player based on how well they did -----
		if(currentScore <= 60){
			$('.endingInfo .score').append('<div>Hmmmm maybe study up on this seasons trends and try again!</div>')
		}else if( currentScore > 60 && currentScore < 150){
			$('.endingInfo .score').append('<div>Not too shabby! A few more tweeks and you are ready to style Hollywood Royalty!')
		}else if(currentScore >= 150){
			$('.endingInfo .score').append('<div>Rachel Zoe, is that you??? You are a true fashionista!!!</div>')
		};
	console.log('ENDING')
};



//----------------DROPSWITCH FUNCTION----------------

var dropSwitch = function(){
	if (dropCount % 3 === 0){
			$('.submitSection').append("<button class='submit'>Like this look?</button>");
			round++;
	};
};


$('.submitSection').on('click', '.submit', function(e) {
	console.log(currentScore + '   ' + round + '   ' + clients.length)
	if (round === clients.length){
		endFunction();
	}else{
		emptyBoard();
		setNewRound();
	}
});


//--------------DRAG AND DROP START------------------------------

var dragged;

// affects opacity when dragged
document.addEventListener('drag', function(e) {
  e.target.style.opacity = 0.5;
}, false);

// targets what is dragged and keeps opacity
document.addEventListener('dragstart', function(e) {
  dragged = e.target;
  e.target.style.opacity = 0.5;
}, false);

// sets opacity back to normal once dropped
document.addEventListener('dragend', function(e) {
  e.target.style.opacity = '';
}, false);

// prevents any weird stuff when it is being dragged
document.addEventListener('dragover', function(e) {
  e.preventDefault();
}, false);


// changes drop box color when dragged element enters
document.addEventListener('dragenter', function(e) {
  if(e.target.className === "dropzoneTop") {
    e.target.style.background = "rgba(205, 52, 167, 0.42)";
  }else if(e.target.className === "dropzoneBottom") {
    e.target.style.background = "rgba(205, 52, 167, 0.42)";
  }else if(e.target.className === "dropzoneAccessory") {
    e.target.style.background = "rgba(205, 52, 167, 0.42)";
  }
}, false);

// changes drop box color back to normal when element is dropped
document.addEventListener('dragleave', function(e) {
  if(e.target.className === "dropzone") {
    e.target.style.background = "";
  }
}, false);

// casues these things to happen when dropped
document.addEventListener('drop', function(e) {
  e.preventDefault();
  if(e.target.className === "dropzoneTop") {
    e.target.style.background = "";
		currentScore += +$(dragged).prop('class');
    e.target.appendChild(dragged);
		$(dragged).css('margin','0');
		$('.wordsTop').html('')
		dropCount++;
		dropSwitch();
	};
	if(e.target.className === "dropzoneBottom") {
    e.target.style.background = "";
		currentScore += +$(dragged).prop('class');
    e.target.appendChild(dragged);
		$(dragged).css('margin','0');
		$('.wordsBottom').html('')
		dropCount++;
		dropSwitch();
	};
	if(e.target.className === "dropzoneAccessory") {
    e.target.style.background = "";
		currentScore += +$(dragged).prop('class');
    e.target.appendChild(dragged);
		$(dragged).css('margin','0');
		$('.wordsAccessory').html('')
		dropCount++;
		dropSwitch();
	};
}, false);



//--------------SET NEW ROUND FOR BUTTON CLICKS WITH SOME APPENDING WEIRDNESS----------
// var setNewRound = function(){
// 		$('.clientTitle').append(clients[round].client);
//     $('.story').append('"'+ clients[round].story + '"');
//     for (var x = 0; x<clients[round].tops.length; x++){
//         $('.tops').append("<button type='button' class='" + clients[round].tops[x].rank + "' draggable='true' ondragstart='event.dataTransfer.setData('image/png', null)'><img src='" + clients[round].tops[x].img + "'></button>")
//       };
// 		$('.tops').append("<div class='dropzone'>PLACE TOP HERE</div>");
//     for (var y = 0; y<clients[round].bottoms.length; y++){
//         $('.bottoms').append("<button type='button' class='" + clients[round].bottoms[y].rank + "'><img src='" + clients[round].bottoms[y].img + "'></button>")
//       };
// 		$('.tops').append("<div class='dropHere'>PLACE BOTTOM HERE</div>");
//     for (var z = 0; z<clients[round].accessories.length; z++){
//         $('.accessories').append("<button type='button' class='" + clients[round].accessories[z].rank + "'><img src='"+clients[round].accessories[z].img + "'></button>").draggable()
//     	};
// 		$('.tops').append("<div class='dropHere'>PLACE ACCESSORY HERE</div>");
// 	};

//-------------NAVIGATING THROUGH PAGES THROUGH CLICKING-----------------------------

	// var clickFunction = function(){
	// 		if (clickCount % 3 === 0){
	// 				round++;
	// 				if (round === 5){
	// 					emptyBoard();
	// 					$('.endingInfo').toggle();
	// 					$('.endingInfo .score').append('<div>Your score is ' + currentScore + '! Congratulations you fashionista!')
	// 					console.log('ENDING')
	//
	// 				}else {
	// 				emptyBoard();
	// 				setNewRound();
	// 				console.log('THIS SHOULD SWITCH')
	// 				};
	// 		};
	// };

//----------FOR LOOP TO LOOP THROUGH ARRAY IF NEEDED IN FUTURE-------------------------------
//
// for (var i = 0; i<clients.length; i++){
//   $('header').append(clients[i].story);
//   var thisClient = clients[i];
//   for (var x = 0; x<clients[i].tops.length; x++){
//     $('.tops').append("<button type='button' class='"+thisClient.tops[x].rank+"'><img src='"+thisClient.tops[x].img+"'></button>")
//   };
//   for (var y = 0; y<clients[i].bottoms.length; y++){
//     $('.bottoms').append("<button type='button' class='"+thisClient.bottoms[y].rank+"'><img src='"+thisClient.bottoms[y].img+"'></button>")
//   };
//   for (var z = 0; z<clients[i].accessories.length; z++){
//     $('.accessories').append("<button type='button' class='"+thisClient.accessories[z].rank+"'><img src='"+thisClient.accessories[z].img+"'></button>")
//   };
//
//
// --TO CHECK TO CONFIRM EACH INDIVIDUAL LOOP WORKS------------
//  alert('THIS CLIENTS GREAT!')
//
// };

// ------------SET UP PAGE--------------------------------
$(document).ready(function(evt){
	$('.start').click(function(e){
    e.preventDefault();

		// -----OPTION TO EMPTY BEFORE TOGGLE IDEA----
    // $('header').empty();
    // $('.start').remove();
    // $('div').empty();

		//-------TOGGLE INITIAL INFO-----------------

		$('.initialInfo').toggle();
    setNewRound();
    console.log('hey')
  });

// ------------NAVIGATING THROUGH CLIENTS--------------------------------

// ---------------BUTTON CLICK SCORING------------------------------------
//  $('.tops').on('click', 'button', function(e) {
//   e.preventDefault();
// 	clickCount++;
// 	currentScore += +$(this).prop('class');
// 	console.log(clickCount + ' ' + round + ' ' + clients.length);
// 	clickFunction();
// });
//
//  $('.bottoms').on('click', 'button', function(e) {
//   e.preventDefault();
// 	clickCount++;
//   currentScore += +$(this).prop('class');
// 	console.log(clickCount + ' ' + round + ' ' + clients.length);
// 	clickFunction();
// });
//
//
//
// $('.accessories').on('click', 'button', function(e) {
//   e.preventDefault();
// 	clickCount++;
//   currentScore += +$(this).prop('class');
// 	console.log(clickCount + ' ' + round + ' ' + clients.length);
// 	clickFunction();
// });


// ---------------PLAY AGAIN BUTTON---------------------------------------
$('.endingInfo').on('click', '#playAgain', function(e) {
	e.preventDefault();
	console.log('WORK');
	$('.endingInfo').toggle();
	$('.endingInfo .score').empty();
	$('.initialInfo').toggle();
	round = 0;
	clickCount = 0;
	currentScore = 0;

	// --------USED BEFORE TOGGLE-------------------
	// $('header').empty();
	// $('.story').empty();
	// $('header').html('So You Think You Can Style?');
	// $('div').append("<div class='rules'>Clients will come in and describes an event for which they need an outfit<br> it’s your job to pick from a list of 12 items (3 tops, 3 bottoms, 3 accessories).	<br> Pair the best top, bottom and accessory together and see what the client thinks!	<br>Where will you stand after styling 10 clients?	<br>Will you end up looking SO last season or finish being a true fashionista?<br>	<br>Try your luck with<br>So You Think You Can Style?</div>");
	// $('#playingField').append('<button type="button" class="start">Start styling!</button>');
});



});
